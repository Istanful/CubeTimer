<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>The coolest timer ever</title>
        <meta name="google-signin-client_id" content="628862522438-f06i7s7etk5bmjitd6jecqg1lj6ksg2b.apps.googleusercontent.com">
        <script src="https://apis.google.com/js/platform.js" async defer></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://apis.google.com/js/client:plusone.js" type="text/javascript"></script>
        <script>
          var GoogleAuth; // Google Auth object.
          var isAuthorized;
          var currentApiRequest;
          var SCOPE = 'https://www.googleapis.com/auth/drive.appdata';

          function handleClientLoad() {
            // Load the API's client and auth2 modules.
            // Call the initClient function after the modules load.
            gapi.load('client:auth2', initClient);
          }

          function initClient() {
            gapi.client.init({
              'apiKey': 'AIzaSyD3sqkN68H-p7_Rh1KgQBl9oozEDxdi1Tc',
              'clientId': '628862522438-f06i7s7etk5bmjitd6jecqg1lj6ksg2b.apps.googleusercontent.com',
              'scope': SCOPE,
              'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest']
            }).then(function () {
              GoogleAuth = gapi.auth2.getAuthInstance();

              // Listen for sign-in state changes.
              GoogleAuth.isSignedIn.listen(updateSigninStatus);

              var user = GoogleAuth.currentUser.get();
              setSigninStatus();

              $("#sign-in").click(handleAuthClick);
            });
          }

          function handleAuthClick() {
            if (GoogleAuth.isSignedIn.get()) {
              // User is authorized and has clicked 'Sign out' button.
              GoogleAuth.signOut();
            } else {
              // User is not signed in. Start Google auth flow.
              GoogleAuth.signIn();
            }
          }

          function sendAuthorizedApiRequest(requestDetails) {
            currentApiRequest = requestDetails;
            if (isAuthorized) {
              // Make API request
              gapi.client.request(requestDetails)

              // Reset currentApiRequest variable.
              currentApiRequest = {};
            } else {
              GoogleAuth.signIn();
            }
          }

          function updateSigninStatus(isSignedIn) {
            setSigninStatus(isSignedIn);
          }

          function setSigninStatus(isSignedIn) {
            var user = GoogleAuth.currentUser.get();
            var isAuthorized = user.hasGrantedScopes(SCOPE);
            if (isAuthorized) {
              $('#sign-in').html('Sign out');
            } else {
              $('#sign-in').html('Sign In/Authorize');
            }
          }
        </script>
    </head>
    <body>
      <button id="sign-in">Sign in</button>
      <script async defer src="https://apis.google.com/js/api.js"
        onload="this.onload=function(){};handleClientLoad()"></script>
    </body>
</html>

<!--  628862522438-vhaclfpkb0ba98egeh8njv4klssapqqa.apps.googleusercontent.com -->
